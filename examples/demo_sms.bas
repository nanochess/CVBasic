	'
	' Demo of graphics for CVBasic
	'
	' by Oscar Toledo G.
	'
	' Creation date: Mar/08/2024.
	' Revision date: Aug/06/2024. Added endless loop.
	' Revision date: Apr/27/2025. Adapted for Sega Master System.
	'

	DIM x(32),y(32),col(32)

	MODE 4

	DEFINE SPRITE 0,28,sprite_bitmap

	' Make a bold font
	FOR #c = $0400 TO $0FFF
		d = VPEEK(#c)
		VPOKE #c, d OR (d + d)
	NEXT #c
	FOR #c = $0403 TO $0FFF STEP 4
		VPOKE #c, 0
	NEXT #c

	DEFINE CHAR 128,62,portrait_char

	WHILE 1

	CLS

	SCREEN portrait_pattern,0,260,8,8,8

	GOSUB small_wait

	RESTORE message_1

	GOSUB show_message

	GOSUB small_wait
	
	FOR c = 0 TO 7
		WAIT
		WAIT
		#c = 260 + c * 32
		SCREEN spaces,0,#c,8,1
		SCREEN portrait_pattern,0,#c+32,8,8,8
	NEXT c

	FOR c = 0 TO 7
		WAIT
		WAIT
		#c = 516 + c
		SCREEN spaces,0,#c,1,8,1
		SCREEN portrait_pattern,0,#c+1,8,8,8
	NEXT c

	RESTORE message_2

	GOSUB show_message

	GOSUB small_wait
	
	FOR c = 0 TO 144
		WAIT
		SPRITE 0,$A0,c,$00
		SPRITE 1,$A0,c+8,$02
	NEXT c

	RESTORE message_3

	GOSUB show_message

	GOSUB small_wait

	FOR c = 0 TO 31
		x(c) = RANDOM(176)
		y(c) = RANDOM(240)
		col(c) = (c % 14) * 4
		SPRITE c * 2,y(c),x(c),col(c)
		SPRITE c * 2 + 1,y(c),x(c) + 8,col(c) + 2
	NEXT c

	FOR c = 0 TO 240
		WAIT
		FOR d = 0 TO 15
			SPRITE d * 2,y(d),x(d),col(d)
			SPRITE d * 2 + 1,y(d),x(d) + 8,col(d) + 2
			y(d) = y(d) + 1
			IF y(d) = $c0 THEN y(d) = $f1
		NEXT d
		FOR d = 16 TO 31
			SPRITE d * 2,y(d),x(d),col(d)
			SPRITE d * 2 + 1,y(d),x(d) + 8,col(d) + 2
			x(d) = x(d) + 1
			IF x(d) = $ff THEN x(d) = $00
		NEXT d
	NEXT c

	FOR c = 0 TO 63
		SPRITE c,$E0,0,0
	NEXT c
		
	RESTORE message_4

	GOSUB show_message

	GOSUB small_wait

	WEND

spaces:
	DATA BYTE $20,$00,$20,$00,$20,$00,$20,$00,$20,$00,$20,$00,$20,$00,$20,$00

	INCLUDE "portrait_sms.bas"

small_wait:	PROCEDURE
	FOR c = 0 TO 60
		WAIT
	NEXT c
	END

show_message:	PROCEDURE

	'
	' Erase area.
	'
	FOR #position = $3A1C TO $3BDC STEP 64
		FOR #c = 0 TO $22 STEP 2
			VPOKE #position + #c, 32
		NEXT #c
	NEXT #position

	'
	' Draw message.
	'
	#position = $3800 + 270 * 2
	DO
		READ BYTE d
		IF d = $0D THEN
			#position = ((#position + 64) AND $FFC0) + $001C
		ELSEIF d <> 0 THEN
			VPOKE #position, d
			#position = #position + 2
		END IF
		WAIT
	LOOP WHILE d

	END

message_1:
	DATA BYTE "Hi! This is a",$0d
	DATA BYTE "CVBasic demo",$0d
	DATA BYTE "program.",$00

message_2:
	DATA BYTE "You can displace",$0d
	DATA BYTE "graphics moving",$0d
	DATA BYTE "tiles on the",$0d
	DATA BYTE "screen instead of",$0d
	DATA BYTE "graphic data.",$00

message_3:
	DATA BYTE "Sprites can",$0d
	DATA BYTE "overlay",$0d
	DATA BYTE "background",$0d
	DATA BYTE "graphics.",$00

message_4:
	DATA BYTE "I hope you",$0d
	DATA BYTE "enjoyed the",$0d
	DATA BYTE "demo.",$00

sprite_bitmap:
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"
	BITMAP "2222222222222222"

	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"
	BITMAP "3333333333333333"

	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"
	BITMAP "4444444444444444"

	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"
	BITMAP "5555555555555555"

	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"
	BITMAP "6666666666666666"

	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"
	BITMAP "7777777777777777"

	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"
	BITMAP "8888888888888888"

	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"
	BITMAP "9999999999999999"

	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"
	BITMAP "AAAAAAAAAAAAAAAA"

	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"
	BITMAP "BBBBBBBBBBBBBBBB"

	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"
	BITMAP "CCCCCCCCCCCCCCCC"

	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"
	BITMAP "DDDDDDDDDDDDDDDD"

	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"
	BITMAP "EEEEEEEEEEEEEEEE"

	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
	BITMAP "FFFFFFFFFFFFFFFF"
